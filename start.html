<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INTP çŠ¶æ€åˆ‡æ¢æ¡Œé¢ç»„ä»¶</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+SC:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans SC', 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background for contrast */
            padding: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .widget-container {
            width: 100%;
            max-width: 400px;
            min-height: 300px;
            padding: 1.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: background-color 0.5s, color 0.5s;
        }

        .status-button {
            width: 100%;
            padding: 1.5rem 1rem;
            border-radius: 1rem;
            text-align: center;
            font-size: 1.25rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .status-button:active {
            transform: scale(0.98);
        }

        /* Module A: Architect/Deep Mode */
        .mode-a {
            background-color: #ecfdf5; /* Green light */
            color: #047857; /* Green dark */
            border: 2px solid #a7f3d0;
        }

        /* Module B: General/Output Mode */
        .mode-b {
            background-color: #eff6ff; /* Blue light */
            color: #1d4ed8; /* Blue dark */
            border: 2px solid #bfdbfe;
        }

        /* Module C: Recharge/Rest Mode */
        .mode-c {
            background-color: #f5f3ff; /* Purple light */
            color: #6d28d9; /* Purple dark */
            border: 2px solid #ddd6fe;
        }
        
        .mode-title {
            font-family: 'Inter', sans-serif;
            font-size: 2.25rem;
            font-weight: 800;
        }
        
        .mode-subtitle {
            font-size: 1rem;
            margin-bottom: 1rem;
            color: #4b5563;
        }

        /* Utility classes for dynamic colors */
        .text-current-mode { color: var(--mode-color); }
        .bg-current-mode { background-color: var(--mode-bg); }
        .border-current-mode { border-color: var(--mode-border); }

    </style>
</head>
<body>

    <div id="widget-container" class="widget-container bg-white">
        
        <div class="text-center mb-4">
            <h1 class="text-xs font-bold uppercase tracking-wider text-slate-500">å½“å‰è§’è‰²çŠ¶æ€</h1>
        </div>

        <!-- Mode Display -->
        <div class="text-center mb-6">
            <p id="mode-icon" class="text-6xl mb-2 transition-all duration-500">ğŸ§ </p>
            <h2 id="mode-title" class="mode-title">éšå£«æ¨¡å¼</h2>
            <p id="mode-subtitle" class="mode-subtitle text-slate-500"></p>
        </div>

        <!-- Current Task/Goal -->
        <div class="p-4 rounded-xl border-2 mb-6" id="goal-box">
            <div class="font-bold mb-1 flex items-center gap-2">
                <span id="goal-emoji">ğŸ¯</span>
                <span id="goal-title">æ ¸å¿ƒç›®æ ‡</span>
            </div>
            <p id="goal-text" class="text-sm"></p>
        </div>

        <!-- Trigger/Action Button -->
        <button id="switch-button" class="status-button w-full transition-all duration-500">
            åˆ‡æ¢çŠ¶æ€: å°†å†›æ¨¡å¼
        </button>
        
        <div class="text-center mt-4">
            <p id="trigger-text" class="text-xs text-slate-400">è§¦å‘æ¡ä»¶ï¼šç¡é¥± + å’–å•¡</p>
        </div>

    </div>

    <script>
        const MODES = [
            // æ¨¡å— A: éšå£«æ¨¡å¼ (Architect/Deep Work)
            { 
                id: 'A', 
                title: 'éšå£«æ¨¡å¼', 
                subtitle: 'æ¶æ„å¸ˆ / æ€è€ƒè€…',
                icon: 'ğŸ§ ',
                buttonText: 'åˆ‡æ¢çŠ¶æ€: å°†å†›æ¨¡å¼',
                triggerText: 'è§¦å‘æ¡ä»¶ï¼šç¡é¥± + å’–å•¡',
                goalTitle: 'åªåšä¸€ä»¶â€œå¤§â€äº‹',
                goalText: 'æ€è€ƒæˆ˜ç•¥ã€ç”»æµç¨‹å›¾ã€æˆ–è§£å†³ä¸€ä¸ªæ­»èƒ¡åŒã€‚åšå®Œå°±åœï¼Œå“ªæ€•åªåšäº†30åˆ†é’Ÿã€‚',
                bgColor: '#ecfdf5', // Green light
                textColor: '#047857', // Green dark
                borderColor: '#a7f3d0'
            },
            // æ¨¡å— B: å°†å†›æ¨¡å¼ (General/Output/Meetings)
            { 
                id: 'B', 
                title: 'å°†å†›æ¨¡å¼', 
                subtitle: 'æ•‘ç«é˜Ÿé•¿ / å†³ç­–è€…',
                icon: 'âš”ï¸',
                buttonText: 'åˆ‡æ¢çŠ¶æ€: è¡¥ç»™æ¨¡å¼',
                triggerText: 'è§¦å‘æ¡ä»¶ï¼šèµ°è¿›åŠå…¬å®¤',
                goalTitle: 'é€Ÿæˆ˜é€Ÿå†³',
                goalText: 'é›†ä¸­å¤„ç†ç­¾å­—ã€å›å¤æ¶ˆæ¯ã€å¬æ±‡æŠ¥ç­‰â€œåƒåœ¾â€ä»»åŠ¡ã€‚å‘æŒ‡ä»¤ç»™ ISTJ è½åœ°ã€‚',
                bgColor: '#eff6ff', // Blue light
                textColor: '#1d4ed8', // Blue dark
                borderColor: '#bfdbfe'
            },
            // æ¨¡å— C: è¡¥ç»™æ¨¡å¼ (Recharge/Rest)
            { 
                id: 'C', 
                title: 'è¡¥ç»™æ¨¡å¼', 
                subtitle: 'ç”Ÿæ´»å®¶ / è¿åŠ¨è€…',
                icon: 'ğŸ”‹',
                buttonText: 'åˆ‡æ¢çŠ¶æ€: éšå£«æ¨¡å¼',
                triggerText: 'è§¦å‘æ¡ä»¶ï¼šæ„Ÿè§‰ç´¯äº† / ä¸‹ç­',
                goalTitle: 'ç”Ÿå‘é˜³æ°”',
                goalText: 'ç‰©ç†æ’æ¯’ï¼ˆè¿åŠ¨ã€æˆ·å¤–ï¼‰ã€‚å‘æˆŠåœŸå¥³å‹å……ç”µã€‚åªè°ˆé£æœˆï¼Œä¸è°ˆå·¥ä½œã€‚',
                bgColor: '#f5f3ff', // Purple light
                textColor: '#6d28d9', // Purple dark
                borderColor: '#ddd6fe'
            }
        ];

        const container = document.getElementById('widget-container');
        const modeIcon = document.getElementById('mode-icon');
        const modeTitle = document.getElementById('mode-title');
        const modeSubtitle = document.getElementById('mode-subtitle');
        const goalBox = document.getElementById('goal-box');
        const goalTitle = document.getElementById('goal-title');
        const goalText = document.getElementById('goal-text');
        const switchButton = document.getElementById('switch-button');
        const triggerText = document.getElementById('trigger-text');
        
        let currentIndex = 0;

        /**
         * Loads the saved state index from localStorage.
         * @returns {number} The index of the last active mode, defaults to 0.
         */
        function loadState() {
            const savedIndex = localStorage.getItem('intp_mode_index');
            if (savedIndex !== null) {
                currentIndex = parseInt(savedIndex, 10) % MODES.length;
            } else {
                currentIndex = 0;
            }
        }

        /**
         * Renders the current state to the UI.
         */
        function renderMode() {
            const mode = MODES[currentIndex];
            const nextMode = MODES[(currentIndex + 1) % MODES.length];

            // Update main container theme
            container.style.backgroundColor = mode.bgColor;
            modeIcon.style.color = mode.textColor;
            modeTitle.style.color = mode.textColor;
            goalBox.style.borderColor = mode.borderColor;
            
            // Update mode details
            modeIcon.textContent = mode.icon;
            modeTitle.textContent = mode.title;
            modeSubtitle.textContent = mode.subtitle;
            
            // Update Goal Box
            goalTitle.textContent = mode.goalTitle;
            goalText.textContent = mode.goalText;
            goalTitle.style.color = mode.textColor;
            goalBox.style.backgroundColor = mode.bgColor;
            
            // Update Switch Button
            switchButton.textContent = mode.buttonText;
            switchButton.className = `status-button transition-all duration-500`; // Reset classes
            switchButton.style.backgroundColor = mode.textColor;
            switchButton.style.color = 'white';
            switchButton.style.border = `2px solid ${mode.textColor}`;

            // Update Trigger Text
            triggerText.textContent = mode.triggerText;
            triggerText.style.color = mode.textColor;

            // Save state
            localStorage.setItem('intp_mode_index', currentIndex);
        }

        /**
         * Switches to the next mode in the sequence.
         */
        function switchMode() {
            currentIndex = (currentIndex + 1) % MODES.length;
            renderMode();
        }

        // Initialize on load
        loadState();
        renderMode();

        // Attach event listener
        switchButton.addEventListener('click', switchMode);

    </script>
</body>
</html>